<mvc:View
    xmlns:viz="sap.viz.ui5.controls"
    xmlns:viz.feeds="sap.viz.ui5.controls.common.feeds"
    xmlns:viz.data="sap.viz.ui5.data"
    controllerName="com.candentech.sowtracker.controller.Dashboard"
    xmlns:core="sap.ui.core"
    xmlns:rowmodes="sap.ui.table.rowmodes"
    xmlns:shapes="sap.gantt.simple.shapes"
    xmlns:config="sap.gantt.config"
    xmlns:axistime="sap.gantt.axistime"
    xmlns:simple="sap.gantt.simple"
    xmlns="sap.m"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:table="sap.ui.table"
    displayBlock="true"
    xmlns:f="sap.f"
    xmlns:cards="sap.f.cards"
>
    <FlexBox
        id="mainFlex"
        width="100%"
        justifyContent="Center"
        height="100%"
    >
        <VBox
            id="leftSide"
            width="60%"
            justifyContent="SpaceBetween"
            height="100%"
        >
            <viz:VizFrame
                id="chartContainer"
                vizType="column"
                width="auto"
                height="300px"
                vizProperties="{title:{ text:'Close to Expiry'},dataLabel:{visible:true,showTotal:true},legend:{visible:true}}"
                class="sapUiLargeMarginBegin sapUiLargeMarginEnd sapUiSmallMarginTop"
                uiConfig="{applicationSet:'fiori'}"
            >
                <viz:dataset>
                    <viz.data:FlattenedDataset
                        id="_IDGenFlattenedDataset1"
                        data="{docs>/filtered/EXP}"
                    >
                        <viz.data:dimensions>
                            <viz.data:DimensionDefinition
                                id="_IDGenDimensionDefinition1"
                                name="Employee Names"
                                value="{docs>ProjectName}"
                            />
                        </viz.data:dimensions>
                        <viz.data:measures>
                            <viz.data:MeasureDefinition
                                id="_IDGenMeasureDefinition1"
                                name="data"
                                value="{path:'docs>AgreementEndDate', formatter:'.formatter.calculateExpiry'}"
                            />
                        </viz.data:measures>
                    </viz.data:FlattenedDataset>
                </viz:dataset>

                <viz:feeds>
                    <viz.feeds:FeedItem
                        id='valueAxisFeed'
                        uid="valueAxis"
                        type="Measure"
                        values="data"
                    />
                    <viz.feeds:FeedItem
                        id='categoryAxisFeed'
                        uid="categoryAxis"
                        type="Dimension"
                        values="Employee Names"
                    />
                </viz:feeds>
                <viz:dependents>
                    <Popover id="isapop" />
                </viz:dependents>
            </viz:VizFrame>

            <!-- gantt chart -->

            <simple:GanttChartContainer
                id="ganttContainer"
                class="sapUiResponsiveMargin"
            >
                <simple:toolbar>
                    <simple:ContainerToolbar id="toolbar" />
                </simple:toolbar>

                <simple:GanttChartWithTable
                    id="ganttTableContainer"
                    shapeSelectionMode="Single"
                >
                    <simple:axisTimeStrategy>
                        <axistime:StepwiseZoomStrategy
                            id="sss"
                            zoomLevel="1"
                        >
                            <axistime:totalHorizon>
                                <config:TimeHorizon
                                    id="th"
                                    endTime="20301029000000"
                                    startTime="20221129000000"
                                />
                            </axistime:totalHorizon>
                            <axistime:visibleHorizon>
                                <config:TimeHorizon
                                    id="thv"
                                    startTime="20230101000000"
                                    endTime="20241029000000"
                                />
                            </axistime:visibleHorizon>
                        </axistime:StepwiseZoomStrategy>
                    </simple:axisTimeStrategy>
                    <simple:table>
                        <table:Table
                            id="mainTable"
                            rows="{path: 'docs>/agreements'}"
                            selectionBehavior="RowSelector"
                            selectionMode="Single"
                        >
                            <table:columns>
                                <table:Column id="col">
                                    <Text
                                        id="text"
                                        text="Clients and Projects"
                                    />
                                    <table:template>
                                        <Label
                                            id="label"
                                            text="{docs>CompanyName} {docs>ProjectName}"
                                        />
                                    </table:template>
                                </table:Column>
                            </table:columns>
                            <table:rowMode>
                                <rowmodes:Fixed
                                    id="RowControl"
                                    rowCount="7"
                                />
                            </table:rowMode>

                            <table:rowSettingsTemplate>
                                <simple:GanttRowSettings
                                    id="grs"
                                    rowId="{docs>SrNo}"
                                >
                                    <simple:shapes1>
                                        <shapes:Task
                                            id="task"
                                            time="{path: 'docs>AgreementStartDate', formatter: '.formatter.calculateDuration'}"
                                            endTime="{path: 'docs>AgreementEndDate', formatter: '.formatter.calculateDuration'}"
                                            type="Normal"
                                            color="{path: 'docs>Type', formatter: '.formatter.getShapeColor'}"
                                        />
                                    </simple:shapes1>
                                </simple:GanttRowSettings>
                            </table:rowSettingsTemplate>
                        </table:Table>
                    </simple:table>
                </simple:GanttChartWithTable>
            </simple:GanttChartContainer>
        </VBox>
        <VBox
            height="100%"
            id="abobo"
            class="sapUiLargeMarginBegin"
        >
            <Panel
                id="panel"
                width="auto"
                height="333px"
                class="sapUiResponsiveMargin"
            >
                <f:Card id="Experies">
                    <f:header>
                        <cards:Header
                            id="ipi"
                            title="Urgent Expiries"
                        />
                    </f:header>
                    <f:content>
                        <List
                            id="as"
                            items="{docs>/filtered/EXP}"
                        >
                            <items>
                                <ObjectListItem
                                    id="lis"
                                    title="{docs>ProjectName}"
                                >
                                    <firstStatus>
                                        <ObjectStatus
                                            id="expiresIn"
                                            text="{path:'docs>AgreementEndDate', formatter:'.formatter.calculateExpiry'}"
                                        />
                                    </firstStatus>
                                    <ObjectAttribute
                                        id="expireTag"
                                        text="expires in "
                                    />
                                </ObjectListItem>
                            </items>
                        </List>
                    </f:content>
                </f:Card>
            </Panel>

            <HBox id="innerProj">
                <GenericTile
                    press=".filterDocs"
                    id="_IDGenGenericTile1"
                    class="sapUiSmallMargin sapUiMarginDown"
                    frameType="OneByHalf"
                    header="Total Documents"
                >
                    <customData>
                        <core:CustomData key="All" />
                    </customData>
                    <TileContent id="_IDGenTileContent1">
                        <Title
                            id="_IDGenTitle1"
                            titleStyle="H2"
                            text="{docs>/length/All}"
                            class="sapUiMarginSmallStart sapThemeHighlight"
                        />
                    </TileContent>
                </GenericTile>
                <GenericTile
                    press=".filterDocs"
                    id="_IDGenGenericTile"
                    class="sapUiSmallMargin sapUiMarginDown"
                    frameType="OneByHalf"
                    header="SOW"
                >
                    <customData>
                        <core:CustomData key="SOW" />
                    </customData>
                    <TileContent id="_IDGenTileContent">
                        <Title
                            id="_IDGenTitle"
                            titleStyle="H2"
                            text="{docs>/length/SOW}"
                            class="sapUiMarginSmallStart sapThemeHighlight"
                        />
                    </TileContent>
                </GenericTile>
            </HBox>
            <HBox id="2nd">
                <GenericTile
                    press=".filterDocs"
                    id="_IDGenGenericTile2"
                    class="sapUiSmallMargin sapUiMarginDown"
                    frameType="OneByHalf"
                    header="MSA"
                >
                    <customData>
                        <core:CustomData key="MSA" />
                    </customData>
                    <TileContent id="_IDGenTileContent2">
                        <Title
                            id="_IDGenTitle2"
                            titleStyle="H2"
                            text="{docs>/length/MSA}"
                            class="sapUiMarginSmallStart sapThemeHighlight"
                        />
                    </TileContent>
                </GenericTile>
                <GenericTile
                    header="NDA"
                    press=".filterDocs"
                    id="_IDGenGenericTile4"
                    class="sapUiSmallMargin sapUiMarginDown"
                    frameType="OneByHalf"
                >
                    <customData>
                        <core:CustomData key="NDA" />
                    </customData>
                    <TileContent id="_IDGenTileContent4">
                        <Title
                            id="_IDGenTitle3"
                            titleStyle="H2"
                            text="{docs>/length/NDA}"
                            class="sapUiMarginSmallStart sapThemeHighlight"
                        />
                    </TileContent>
                </GenericTile>
            </HBox>
            <!-- <GenericTile
                id="NavTable"
                frameType="TwoByHalf"
                class="sapUiResponsiveMargin"
                press=".navTable"
            >
                <TileContent
                    id="navContent"
                    state="Loaded"
                >
                    <content>
                        <Title
                            id="sadasd"
                            text="GO TO TABLE"
                            class="sapUiMarginSmallStart sapThemeHighlight"
                        />
                    </content>
                </TileContent>
                <TileContent id="arrow">
                    <core:Icon
                        id="hell"
                        src="sap-icon://arrow-right"
                        class="sapUiMarginSmallStart sapThemeHighlight"
                    />
                </TileContent>
            </GenericTile> -->
        </VBox>
    </FlexBox>
</mvc:View>
